query AvailableCommunities {
  community {
    ...CommunityFields
  }
}

fragment CommunityFields on community {
  description
  discord_id
  icon
  id
  name
  owner {
    id
    discord_id
    discord_email
    discord_user_name
    discord_avatar
  }
}

query getCommunityById($id: Int!) {
  community_by_pk(id: $id) {
    ...CommunityFields
  }
}

mutation UpdateCommunityById(
  $id: Int!
  $name: String
  $description: String
  $icon: String
) {
  update_community_by_pk(
    pk_columns: { id: $id }
    _set: { description: $description, icon: $icon, name: $name }
  ) {
    id
  }
}

mutation DeleteCommunityById($id: Int!) {
  delete_community_by_pk(id: $id) {
    id
  }
}

mutation InsertCommunity(
  $description: String
  $discord_id: String!
  $name: String!
  $icon: String
  $owner_id: Int!
) {
  insert_community_one(
    object: {
      description: $description
      discord_id: $discord_id
      icon: $icon
      name: $name
      owner_id: $owner_id
    }
  ) {
    ...CommunityFields
  }
}

query GetExistingCommunitiesByDiscordIds($discord_ids: [String!]) {
  community(where: { discord_id: { _in: $discord_ids } }) {
    ...CommunityFields
  }
}
